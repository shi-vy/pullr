version: "3.9"

services:
  pullr:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        BRANCH: ${BRANCH:-main}
        COMMIT: ${COMMIT:-unknown}
    image: pullr:${BRANCH:-main}
    container_name: pullr_${BRANCH:-main}
    ports:
      - "8080:8080"
    volumes:
      - /mnt/bilby/downloads:/downloads
      - /mnt/dugong/media:/media
      - ./config:/config
      - ./app/logs:/logs
    environment:
      - TZ=Australia/Brisbane
      - BRANCH=${BRANCH:-main}
      - COMMIT=${COMMIT:-unknown}
    restart: unless-stopped
